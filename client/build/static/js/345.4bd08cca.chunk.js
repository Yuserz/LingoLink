"use strict";(self.webpackChunklingo_link=self.webpackChunklingo_link||[]).push([[345],{6713:function(e,t,n){n.d(t,{Yu:function(){return l},uK:function(){return i},x4:function(){return r},yC:function(){return c},z2:function(){return a}});var s=n(745).Z.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),a=function(e){return s.post("/api/users/register",e)},r=function(e){return s.post("/api/users/login",e)},c=function(e){return s.post("/api/users/search",e)},i=function(e){return s.post("/api/users/addContact",e)},l=function(e){return s.get("/api/users/getUserData",e)}},1345:function(e,t,n){n.r(t),n.d(t,{MyDataContext:function(){return B},default:function(){return F}});var s=n(4165),a=n(5861),r=n(9439),c=n(2791);var i=n.p+"static/media/arrowDown.fe001b7526df858cc3c97176b9d7b734.svg";var l=n.p+"static/media/add.f9ecfe084c116d573ec442922e6c4864.svg",o=n(6713);var u=n.p+"static/media/search.4f60a3b4c11140c8b58cbffc70023c8c.svg",d=n(184);function f(e){var t=e.findContact,n=e.setEmail;return(0,d.jsxs)("div",{className:"search-bar w-full h-full flex items-center p-2 px-4 bg-white border border-solid rounded-2xl outline-gray-200 min-w-[220px] gap-2",children:[(0,d.jsx)("img",{src:u,alt:"icon"}),(0,d.jsx)("input",{className:"w-full outline-none py-2",placeholder:"Search contact or number",type:"text",onChange:function(e){return n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&t()}})]})}var x=n.p+"static/media/close.8625e71317ef995a19c3a78d271d6bc8.svg";function m(e){var t=e.closeModal,n=(0,c.useState)(),i=(0,r.Z)(n,2),u=i[0],m=i[1],h=(0,c.useState)(),p=(0,r.Z)(h,2),v=p[0],j=p[1],g=(0,c.useState)(),b=(0,r.Z)(g,2),w=b[0],N=b[1],y=(0,c.useContext)(B),k=y.setShowMessaging,Z=y.setData,C=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.yC)({email:u});case 3:t=e.sent,Z(t),console.log("success:",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("not found");case 11:N(u);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.uK)({contact:v});case 3:t=e.sent,j(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)("div",{className:"absolute w-screen h-screen bg-black/20 top-0 left-0 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"add-contact-modal flex flex-col w-[500px] h-[400px] bg-secondary rounded-xl overflow-hidden shadow-sm p-4 gap-4",children:[(0,d.jsxs)("div",{className:"flex justify-between px-1 text-lg",children:[(0,d.jsx)("h1",{className:"font-semibold text-black2",children:"Add Contact"}),(0,d.jsx)("button",{onClick:function(){t(!1)},className:"exit-btn",children:(0,d.jsx)("img",{src:x,alt:""})})]}),(0,d.jsx)("div",{className:"h-12 overflow-hidden ",children:(0,d.jsx)(f,{setEmail:m,findContact:C})}),w?(0,d.jsxs)("button",{onClick:function(){k(!0),S(u),t(!1)},className:"search-results bg-white border-2 border-primary/50 hover:border-primary/100 px-4 py-3 rounded-lg flex justify-between items-center",children:[w,(0,d.jsx)("img",{className:"w-4 h-4",src:l,alt:""})]}):[]]})})}function h(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,c.useState)(!1),o=(0,r.Z)(a,2),u=o[0],f=o[1],x=(0,c.useState)(),h=(0,r.Z)(x,2),p=(h[0],h[1]),v=(0,c.useContext)(B);(0,c.useEffect)((function(){v.data&&p(v.data.contacts)}),[v]);return(0,d.jsx)("div",{className:"chat-container gap-3  bg-secondary rounded-md p-3 px-4 flex flex-col justify-between".concat(n?"expanded min-h-[150px] max-h-fit":""),children:(0,d.jsxs)("div",{className:"flex items-center w-full justify-between h-fit  ".concat(n?"pb-2 border-gray-300/80 border-b ":""),children:[(0,d.jsxs)("button",{onClick:function(){s(!n)},className:"add-btn flex gap-2 items-center h-fit",children:[(0,d.jsx)("img",{className:"".concat(n?"rotate-180":""),src:i,alt:""}),(0,d.jsx)("h2",{children:"Chat"})]}),(0,d.jsx)("button",{onClick:function(){return f(!0)},className:"dropDown-btn h-fit",children:(0,d.jsx)("img",{src:l,alt:""})}),u?(0,d.jsx)(m,{closeModal:f}):""]})})}function p(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1];return(0,d.jsx)("div",{className:"group-container bg-secondary rounded-md p-3 px-4 flex justify-between".concat(n?"expanded min-h-[150px] max-h-fit":""),children:(0,d.jsxs)("div",{className:"flex items-center w-full justify-between h-fit ".concat(n?"pb-2 border-gray-300/80 border-b ":""),children:[(0,d.jsxs)("button",{onClick:function(){s(!n)},className:"add-btn flex gap-2 items-center h-fit",children:[(0,d.jsx)("img",{className:"".concat(n?"rotate-180":""),src:i,alt:""}),(0,d.jsx)("h2",{children:"Group"})]}),(0,d.jsx)("button",{className:"dropDown-btn h-fit",children:(0,d.jsx)("img",{src:l,alt:""})})]})})}var v=n.p+"static/media/logo.03f935fcbf41b2277555b578c5c29a5d.svg";function j(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"sidebar-container flex flex-col justify-center p-4 px-6 gap-8",children:[(0,d.jsx)("img",{src:v,alt:""}),(0,d.jsx)("div",{className:"chat",children:(0,d.jsx)(h,{})}),(0,d.jsx)("div",{className:"group",children:(0,d.jsx)(p,{})})]})})}function g(){return(0,d.jsx)("div",{children:"StatusBtn"})}function b(){return(0,d.jsx)("div",{children:"DarkModeBtn"})}function w(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("header",{className:"flex justify-between mt-4 gap-4 items-center",children:[(0,d.jsx)("div",{className:"w-1/2",children:(0,d.jsx)(f,{})}),(0,d.jsxs)("div",{className:"util-bar flex gap-2",children:[(0,d.jsx)(g,{}),(0,d.jsx)(b,{}),(0,d.jsxs)("div",{className:"Logout flex gap-1",children:[(0,d.jsx)("img",{src:"",alt:"icon"}),(0,d.jsx)("div",{className:"user-name",children:"user"})]})]})]})})}function N(e){var t=e.children;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"home-container flex w-full h-screen",children:[(0,d.jsx)("div",{className:"sidebar bg-primary w-[20%] min-w-[250px]",children:(0,d.jsx)(j,{})}),(0,d.jsxs)("div",{className:"flex flex-col w-full h-full mx-4 jus",children:[(0,d.jsx)(w,{}),t]})]})})}var y=n(4123),k=n(3433),Z=n(2426),C=n.n(Z);var S=n.p+"static/media/send.414e37bd39ed2876cdf45338a2d892fb.svg";var D=n.p+"static/media/call.6f708d335a4a873e9a7b66ee94fe1d89.svg";var E=n.p+"static/media/cam.4009c946eaba801807ee51907ed6d48a.svg";var M=function(e){var t=e.socket,n=e.username,i=e.room,l=(0,c.useState)(""),o=(0,r.Z)(l,2),u=o[0],f=o[1],x=(0,c.useState)([]),m=(0,r.Z)(x,2),h=m[0],p=m[1],v=(0,c.useRef)(null),j=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===u){e.next=6;break}return a={room:i,author:n,message:u,time:C()().format("h:mm A")},e.next=4,t.emit("send_message",a);case 4:p((function(e){return[].concat((0,k.Z)(e),[a])})),f("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=function(e){p((function(t){return[].concat((0,k.Z)(t),[e])}))};return t.on("receive_message",e),function(){t.off("receive_message",e)}}),[t]),(0,c.useEffect)((function(){v.current&&v.current.scrollIntoView({behavior:"smooth"})}),[h]),(0,d.jsxs)("div",{className:"chat-window w-3/4 h-full flex justify-between flex-col p-2 gap-2",children:[(0,d.jsx)("div",{className:"contact-profile  pt-2 w-full flex justify-center h-full p-4 items-center",children:(0,d.jsx)("div",{className:"flex flex-col justify-center w-fit",children:(0,d.jsx)("h4",{className:"text-center",children:n})})}),(0,d.jsx)("div",{className:"flex flex-col gap-2",children:(0,d.jsx)("div",{className:"chat-body h-full overflow-auto",children:(0,d.jsxs)("div",{className:"message-box flex flex-col gap-2 h-full max-h-[400px] overflow-y-auto",children:[h.map((function(e,t){var s=C()(e.time,"h:mm A"),a=C()().diff(s,"minutes")<1?"now":s.format("h:mm A");return(0,d.jsxs)("div",{className:"message-content-container w-fit max-w-[70%] px-4 ".concat(n===e.author?"self-start":"self-end"),children:[(0,d.jsx)("div",{className:"message-content",children:(0,d.jsx)("p",{className:"w-full rounded-2xl p-4 ".concat(n===e.author?"bg-primary text-white":"bg-white self-end"),children:e.message})}),(0,d.jsx)("div",{className:"message-meta flex justify-end gap-2",children:(0,d.jsx)("p",{className:"text-gray-400 text-sm",id:"time",children:a})})]},t)})),(0,d.jsx)("div",{ref:v})]})})}),(0,d.jsxs)("div",{className:"chat-footer flex gap-4",children:[(0,d.jsxs)("div",{className:"p-3 px-4 w-full h-fit flex bg-white rounded-2xl gap-1",children:[(0,d.jsx)("input",{className:"p-1 w-full outline-none",type:"text",value:u,placeholder:"Type a message...",onChange:function(e){f(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&j()}}),(0,d.jsxs)("button",{className:"p-2 hover:border-2 hover:border-primary/50 border-2 border-white/0 rounded-xl focus:border-primary",children:[" ",(0,d.jsx)("img",{className:"w-8 h-6",src:E,alt:""})]}),(0,d.jsxs)("button",{className:"p-2 hover:border-2 hover:border-primary/50 border-2 border-white/0 rounded-xl focus:border-primary",children:[" ",(0,d.jsx)("img",{className:"w-8 h-6",src:D,alt:""})]})]}),(0,d.jsx)("button",{onClick:j,children:(0,d.jsx)("img",{src:S,alt:""})})]})]})},_=y.ZP.connect("http://localhost:3001");var A=function(e){var t=e.data.data.name;return(0,c.useEffect)((function(){_.emit("join_room",1)}),[]),(0,d.jsx)("div",{className:"chat-container my-4 flex justify-center w-full h-full overflow-clip",children:(0,d.jsx)(M,{socket:_,username:t,room:1})})},K=n(6060),B=(0,c.createContext)();function F(){var e=(0,c.useState)(!1),t=(0,r.Z)(e,2),n=t[0],i=t[1],l=(0,c.useState)(),u=(0,r.Z)(l,2),f=u[0],x=u[1],m=(0,c.useContext)(K.x)._id,h=(0,c.useCallback)((0,a.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.Yu)({_id:m});case 3:t=e.sent,n=t.data,x(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[m]),p=(0,c.useMemo)((function(){return{data:f,showMessaging:n,setShowMessaging:i,setData:x}}),[f,n,i,x]);return(0,c.useEffect)((function(){h()}),[h]),(0,d.jsx)(B.Provider,{value:p,children:(0,d.jsx)(N,{children:n?(0,d.jsx)(A,{data:f,openMessaging:i}):""})})}}}]);
//# sourceMappingURL=345.4bd08cca.chunk.js.map